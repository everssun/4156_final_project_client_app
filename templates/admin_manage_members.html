{% extends "layout.html" %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
{% endwith %}
<div class="navbar-nav">
    <a class="nav-link" href="/admin-center">Back</a>
</div>

<div class="container full-width mt-4 text-center">
    <h2> My Members</h2>
    <p><strong>Totoal Members Count:</strong> {{total_members}}</p>
</div>
<div class="container full-width mt-4">
    <table class="table">
        <thead>
            <tr>
                <th>Email</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Phone Number</th>
                <th>View</th>
                <th>Modify</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            {% for item in data %}
                <tr>
                    <td>{{ item['email'] }}</td>
                    <td>{{ item['first_name'] }}</td>
                    <td>{{ item['last_name'] }}</td>
                    <td>{{item['phone_number']}}</td>
                    <td><a class="btn btn-light"><i class="fa fa-search"></i></a></td>
                    <td><a class="btn btn-light"><i class="fas fa-edit"></i></a></td>
                    <td><a class="btn btn-danger"><i class="fas fa-trash-alt"></i></a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li class="page-item {% if page == 1 %}disabled{% endif %}">
                <a class="page-link" href="?page={{ page - 1 }}&pagesize={{ page_size }}" tabindex="-1" {% if page == 1 %}aria-disabled="true"{% endif %}>Previous</a>
            </li>
            
            {% for p in range(1, total_pages + 1) %}
                <li class="page-item {% if p == page %}active{% endif %}">
                    <a class="page-link" href="?page={{ p }}&pagesize={{ page_size }}">{{ p }}</a>
                </li>
            {% endfor %}
            
            <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                <a class="page-link" href="?page={{ page + 1 }}&pagesize={{ page_size }}">Next</a>
            </li>
        </ul>
    </nav>
</div>


{% endblock %}